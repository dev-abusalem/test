import { useId } from 'react'
import Image from 'next/image'
import clsx from 'clsx'
import {ImageCredits} from "@/components/ImageCredits";

// Image shapes, to let users see only portions of the image
const shapes = [
  {
    width: 655,
    height: 680,
    path: 'M537.827 9.245A11.5 11.5 0 0 1 549.104 0h63.366c7.257 0 12.7 6.64 11.277 13.755l-25.6 128A11.5 11.5 0 0 1 586.87 151h-28.275a15.999 15.999 0 0 0-15.689 12.862l-59.4 297c-1.98 9.901 5.592 19.138 15.689 19.138h17.275l.127.001c.85.009 1.701.074 2.549.009 11.329-.874 21.411-7.529 24.88-25.981.002-.012.016-.016.023-.007.008.009.022.005.024-.006l24.754-123.771A11.5 11.5 0 0 1 580.104 321h63.366c7.257 0 12.7 6.639 11.277 13.755l-25.6 128A11.5 11.5 0 0 1 617.87 472H559c-22.866 0-28.984 7.98-31.989 25.931-.004.026-.037.035-.052.014-.015-.02-.048-.013-.053.012l-24.759 123.798A11.5 11.5 0 0 1 490.87 631h-29.132a14.953 14.953 0 0 0-14.664 12.021c-4.3 21.502-23.18 36.979-45.107 36.979H83.502c-29.028 0-50.8-26.557-45.107-55.021l102.4-512C145.096 91.477 163.975 76 185.902 76h318.465c10.136 0 21.179-5.35 23.167-15.288l10.293-51.467Zm-512 160A11.5 11.5 0 0 1 37.104 160h63.366c7.257 0 12.7 6.639 11.277 13.755l-25.6 128A11.5 11.5 0 0 1 74.87 311H11.504c-7.257 0-12.7-6.639-11.277-13.755l25.6-128Z',
    //path: 'M 69.222439,225.71437 C -12.056156,185.09894 15.694722,61.928477 106.43414,60.552445 c 16.58011,-0.251278 23.17857,1.322319 39.74836,9.479501 12.26326,6.037229 23.49617,14.362006 29.34725,21.749564 l 9.47927,11.96865 -18.04357,9.10834 -18.04368,9.10847 -8.52892,-8.90249 C 126.1045,98.150703 98.133354,96.067866 79.152925,108.50437 c -8.914104,5.84082 -19.332517,26.61847 -19.431795,38.75333 -0.150306,18.38763 12.112439,36.61217 29.667779,44.0909 9.72966,4.14504 9.911571,4.58558 9.911571,24.00472 0,23.78964 -1.897318,24.44319 -30.078041,10.36105 z M 148.09601,193.96442 V 174.14116 H 123.69823 99.30048 v -16.77335 -16.77346 h 41.17122 41.17112 v 36.59661 36.5966 h -16.77346 -16.77335 z',
  },
  {
    width: 719,
    height: 680,
    path: 'M89.827 9.245A11.5 11.5 0 0 1 101.104 0h63.366c7.257 0 12.7 6.64 11.277 13.755l-25.6 128A11.5 11.5 0 0 1 138.87 151H75.504c-7.257 0-12.7-6.639-11.277-13.755l25.6-128Zm-64 321A11.5 11.5 0 0 1 37.104 321h63.366c7.257 0 12.7 6.639 11.277 13.755l-25.6 128A11.5 11.5 0 0 1 74.87 472H11.504c-7.257 0-12.7-6.639-11.277-13.755l25.6-128ZM526.795 470a15.999 15.999 0 0 0-15.689 12.862l-32.032 160.159c-4.3 21.502-23.18 36.979-45.107 36.979H115.502c-29.028 0-50.8-26.557-45.107-55.021l102.4-512C177.096 91.477 195.975 76 217.902 76h318.465c29.028 0 50.8 26.557 45.107 55.021l-33.768 168.841c-1.98 9.901 5.592 19.138 15.689 19.138h17.075l.127.001c.85.009 1.701.074 2.549.009 11.329-.874 21.411-7.529 24.88-25.981.002-.012.016-.016.023-.007.008.009.022.005.024-.006l24.754-123.771A11.5 11.5 0 0 1 644.104 160h63.366c7.257 0 12.7 6.639 11.277 13.755l-25.6 128A11.5 11.5 0 0 1 681.87 311H623c-22.866 0-28.984 7.98-31.989 25.931-.004.026-.037.035-.052.014-.015-.02-.048-.013-.053.012l-24.759 123.798A11.5 11.5 0 0 1 554.87 470h-28.075Z',
  },
  {
    width: 719,
    height: 680,
    path: 'M632.827 9.245A11.5 11.5 0 0 1 644.104 0h63.366c7.257 0 12.7 6.64 11.277 13.755l-25.6 128A11.5 11.5 0 0 1 681.87 151h-28.275a15.999 15.999 0 0 0-15.689 12.862l-95.832 479.159c-4.3 21.502-23.18 36.979-45.107 36.979H178.502c-29.028 0-50.8-26.557-45.107-55.021l102.4-512C240.096 91.477 258.975 76 280.902 76h318.465c10.136 0 21.179-5.35 23.167-15.288l10.293-51.467Zm0 479A11.5 11.5 0 0 1 644.104 479h63.366c7.257 0 12.7 6.639 11.277 13.755l-25.6 128A11.5 11.5 0 0 1 681.87 630h-63.366c-7.257 0-12.7-6.639-11.277-13.755l25.6-128ZM37.104 159a11.5 11.5 0 0 0-11.277 9.245l-25.6 128C-1.196 303.361 4.247 310 11.504 310H74.87a11.5 11.5 0 0 0 11.277-9.245l24.76-123.798a.03.03 0 0 1 .052-.012c.015.021.048.012.052-.014C114.016 158.98 120.134 151 143 151h58.87a11.5 11.5 0 0 0 11.277-9.245l25.6-128C240.17 6.64 234.727 0 227.47 0h-63.366a11.5 11.5 0 0 0-11.277 9.245l-24.754 123.771c-.002.011-.016.015-.024.006-.007-.009-.021-.005-.023.007-3.469 18.452-13.551 25.107-24.88 25.981-.848.065-1.699 0-2.549-.009l-.127-.001H37.104Z',
  },
  {
    width: 719,
    height: 680,
    //path: 'M 89.827 9.245 A 11.5 11.5 0 0 1 101.104 0 h 63.366 c 7.257 0 12.7 6.64 11.277 13.755 l -25.6 128 A 11.5 11.5 0 0 1 138.87 151 H 75.504 c -7.257 0 -12.7 -6.639 -11.277 -13.755 l 25.6 -128 Z m -64 321 A 11.5 11.5 0 0 1 37.104 321 h 63.366 c 7.257 0 12.7 6.639 11.277 13.755 l -25.6 128 A 11.5 11.5 0 0 1 74.87 472 H 11.504 c -7.257 0 -12.7 -6.639 -11.277 -13.755 l 25.6 -128 Z M 540 467 a 15.999 15.999 0 0 0 -15.689 12.862 l -32.032 160.159 c -4.3 21.502 -23.18 36.979 -45.107 36.979 H 115.502 c -29.028 0 -50.8 -26.557 -45.107 -55.021 l 102.4 -512 C 177.096 91.477 195.975 76 217.902 76 h 318.465 c 29.028 0 50.8 26.557 45.107 55.021 l -33.768 168.841 c -1.98 9.901 5.592 19.138 15.689 19.138 h 17.075 l 0.127 0.001 c 0.85 0.009 1.701 0.074 2.549 0.009 c 11.329 -0.874 21.411 -7.529 24.88 -25.981 c 0.002 -0.012 0.016 -0.016 0.023 -0.007 c 0.008 0.009 0.022 0.005 0.024 -0.006 l 24.754 -123.771 A 11.5 11.5 0 0 1 644.104 160 h 63.366 c 7.257 0 12.7 6.639 11.277 13.755 l -63.747 419.245 A 11.5 11.5 0 0 1 642 603 H 589 A 11.5 11.5 0 0 1 576 591 L 596 478 C 597 485 598 473 588 468 Z Z',
    path: 'M 89.827 9.245 Z m 3.173 2.755 A 11.5 11.5 0 0 1 103 1 h 63.366 c 7.257 0 12.7 6.639 11.277 13.755 l -93.643 442.245 A 11.5 11.5 0 0 1 69 469 H 11.504 c -7.257 0 -12.7 -6.639 -11.277 -13.755 z Z M 540 467 a 15.999 15.999 0 0 0 -15.689 12.862 l -32.032 160.159 c -4.3 21.502 -23.18 36.979 -45.107 36.979 H 115.502 c -29.028 0 -50.8 -26.557 -45.107 -55.021 l 102.4 -512 C 177.096 91.477 195.975 76 217.902 76 h 318.465 c 29.028 0 50.8 26.557 45.107 55.021 l -33.768 168.841 c -1.98 9.901 5.592 19.138 15.689 19.138 h 17.075 l 0.127 0.001 c 0.85 0.009 1.701 0.074 2.549 0.009 c 11.329 -0.874 21.411 -7.529 24.88 -25.981 c 0.002 -0.012 0.016 -0.016 0.023 -0.007 c 0.008 0.009 0.022 0.005 0.024 -0.006 l 24.754 -123.771 A 11.5 11.5 0 0 1 644.104 160 h 63.366 c 7.257 0 12.7 6.639 11.277 13.755 l -63.747 419.245 A 11.5 11.5 0 0 1 642 603 H 589 A 11.5 11.5 0 0 1 576 589 L 596 478 C 597 485 598 473 588 468 Z Z',
  },
]

export function StylizedImage({ shape = 0, className, licenseText, licenseLink, licenseColor, ...props }) {
  let id = useId()
  let { width, height, path } = shapes[shape]

  return (
    <div
      className={clsx(
        className,
        'relative flex aspect-[719/680] w-full grayscale',
      )}
    >
      <svg viewBox={`0 0 ${width} ${height}`} fill="none" className="h-full">
        <g clipPath={`url(#${id}-clip)`} className="group">
          <g className="origin-center scale-100 transition duration-500 motion-safe:group-hover:scale-105">
            <foreignObject width={width} height={height}>
              <Image
                alt=""
                className="w-full bg-neutral-100 object-cover"
                style={{ aspectRatio: `${width} / ${height}` }}
                {...props}
              />
            </foreignObject>
          </g>
          <use
            href={`#${id}-shape`}
            strokeWidth="2"
            className="stroke-neutral-950/10"
          />
        </g>
        <defs>
          <clipPath id={`${id}-clip`}>
            <path
              id={`${id}-shape`}
              d={path}
              fillRule="evenodd"
              clipRule="evenodd"
            />
          </clipPath>
        </defs>
      </svg>

      <ImageCredits className={'absolute bottom-0 left-1/2 transform -translate-x-3/4 ' + (licenseColor ? licenseColor : 'text-white')} href={licenseLink}>{licenseText}</ImageCredits>
    </div>
  )
}
